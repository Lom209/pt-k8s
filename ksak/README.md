# Kubernetes Swiss Army Knife (KSAK)

A lightweight and interactive CLI tool for managing Kubernetes clusters and interacting with pods.

## Overview

KSAK provides a simple terminal-based interface to perform common Kubernetes operations without memorizing complex kubectl commands. It features an interactive menu system that makes it easy to:

- List all services in a cluster
- Set up port forwarding to services with intuitive selection
- Browse and retrieve files from pods with a file explorer interface

## Features

### Service Management
- List all services across all namespaces
- View detailed service information

### Port Forwarding
- Interactive service selection
- Port configuration with smart defaults
- Simple port-forward setup with clear feedback

### File Operations
- Browse the file system of any pod with an interactive navigator
- Select and retrieve files from pods to your local system
- Support for multiple containers within pods
- Automatic path suggestions for saving files

## Requirements

- Python 3.6+
- Kubernetes cluster access
- `kubectl` installed and configured
- Python dependencies:
  - kubernetes
  - simple_term_menu

## Installation

1. Clone the repository:
```bash
git clone https://github.com/yourusername/pt-k8s.git
cd pt-k8s/ksak
```

2. Install dependencies:
```bash
pip install kubernetes simple_term_menu
```

3. Ensure your kubeconfig is in place or provide one in the ksak directory:
```bash
cp ~/.kube/config ./k3s.kubeconfig
# or
# Let KSAK use your default kubeconfig
```

## Usage

Run the main script to launch the interactive menu:

```bash
python3 ksak.py
```

### Configuration

KSAK will use:
1. A kubeconfig file named `k3s.kubeconfig` in the project directory if it exists
2. Your default kubeconfig at `~/.kube/config` if the local one doesn't exist

### Interactive Menu

The main menu provides the following options:
- **List Services**: Display all services in the cluster
- **Port-Forward Service**: Set up port-forwarding with interactive service selection
- **Retrieve File from Pod**: Navigate pod filesystems and download files
- **Exit**: Quit the application

## Project Structure

```
ksak/
├── ksak.py                # Main application script
├── k3s.kubeconfig         # Kubernetes configuration file
└── functions/
    ├── file_retriever.py  # Pod file browsing and retrieval functionality
    └── port_forward.py    # Service port-forwarding functionality
```

## Use Cases

- **DevOps Engineers**: Quickly access pod logs and files during debugging
- **Kubernetes Admins**: Easily port-forward to internal services for testing
- **Developers**: Retrieve config files or logs from running applications
- **Security Professionals**: Access files from containerized penetration testing tools

## Integration with pt-main

KSAK works seamlessly with the pt-main penetration testing environment. Use it to:

- Access files generated by penetration testing tools
- Retrieve scan results and reports
- Port-forward services running in the penetration testing container
